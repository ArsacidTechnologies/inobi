(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(t,e,n){t.exports=n(46)},46:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),c=n(4),l=n.n(c),s=n(7),u=n(5),p=n(2),d=n(15),m=n(16),f=n(18),h=n(17),g=n(19),v=n(3),y=n.n(v),k=function(){var t=JSON.stringify({username:"kurishov",pwd:"cartrack"});return y.a.post("http://transport.inobi.kg:5000/app/v2/login",t,{headers:{"Content-Type":"application/json",Accept:"application/json"}})},E="Bearer ".concat(window.localStorage.getItem("token")),b={headers:{Authorization:E,"Content-Type":"application/json",Accept:"application/json"}},w={headers:{Authorization:E,"Content-Type":"multipart/form"}},O=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;switch(e){case"POST":return r?y.a.post(t+"/".concat(a,"/").concat(r),n,w):y.a.post(t,n,b);case"PUT":return y.a.put(t+"/".concat(a),n,b);case"DELETE":return y.a.delete(t+"/".concat(a),b);default:return y.a.get("".concat(t,"?").concat(Object.keys(n).map(function(t){return"".concat(t,"=").concat(n[t])}).join("&")),b)}},j="http://transport.inobi.kg:5000",x={stations:j+"/transport/organization/v1/stations",platforms:j+"/transport/organization/v1/platforms",view_port:j+"/transport/organization/v1/platforms",routes:j+"/transport/organization/v1/routes",directions:j+"/transport/organization/v1/directions"},_=function(t){function e(){var t,n;Object(d.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(f.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={is_all:!1,is_platform:!1,routes:[],directions:[],platforms:[],selected:{route:null,direction:null,platform:null},audio:{ru_current:null,ru_next:null,ky_current:null,ky_next:null}},n.handleDirection=function(t){t.preventDefault();var e=n.state.directions.find(function(e){return e.id===parseInt(t.target.value,10)});n.setState(Object(p.a)({},n.state,{platforms:e.platforms,selected:Object(p.a)({},n.state.selected,{direction:e})}))},n.handlePlatform=function(t){var e=n.state.selected.direction.platforms.find(function(e){return e.id===parseInt(t.target.value,10)});n.setState(Object(p.a)({},n.state,{is_platform:!0,selected:Object(p.a)({},n.state.selected,{platform:null})}),function(){return n.update(e)})},n.update=function(t){n.setState(Object(p.a)({},n.state,{is_platform:!0,selected:Object(p.a)({},n.state.selected,{platform:t})}))},n.handleUpload=function(t){t.preventDefault(),console.log(t.target.files[0].type),n.setState(Object(p.a)({},n.state,{is_correct:!0,audio:Object(p.a)({},n.state.audio,Object(u.a)({},t.target.name,t.target.files[0]))}))},n.handleSubmit=function(){var t=n.state,e=t.selected,a=t.audio,r=t.is_all;if(null!==e.platform){var o=e.platform.id,i=e.direction.id,c=new FormData;c.append("lang","ru"),c.append("file",a.ru_current),c.append("type","current"),r&&c.append("direction",i);var l=new FormData;l.append("lang","ru"),l.append("file",a.ru_next),l.append("type","current"),r&&l.append("direction",i);var s=new FormData;s.append("lang","ru"),s.append("file",a.ky_current),s.append("type","current"),r&&s.append("direction",i);var u=new FormData;u.append("lang","ru"),u.append("file",a.ky_next),u.append("type","current"),r&&u.append("direction",i),null!==a.ru_current&&O(x.platforms,"POST",c,o,"audios").then(function(t){return console.log(t)}).catch(function(t){return console.log(t)}),null!==a.ru_next&&O(x.platforms,"POST",l,o,"audios").then(function(t){return console.log(t)}).catch(function(t){return console.log(t)}),null!==a.ky_current&&O(x.platforms,"POST",s,o,"audios").then(function(t){return console.log(t)}).catch(function(t){return console.log(t)}),null!==a.ky_next&&O(x.platforms,"POST",u,o,"audios").then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}},n.routeOpt=function(){return n.state.routes.map(function(t){return r.a.createElement("option",{key:t.id,value:t.id},t.name,"-",t.type)})},n.directionOpt=function(){return n.state.directions.map(function(t){return r.a.createElement("option",{key:t.id,value:t.id},t.type)})},n.platformOpt=function(){return n.state.platforms.map(function(t){return r.a.createElement("option",{key:t.id,value:t.id},t.station.name)})},n.handleAll=function(t){n.setState(Object(p.a)({},n.state,{is_all:t.target.checked}))},n}return Object(g.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.connect()}},{key:"connect",value:function(){var t=Object(s.a)(l.a.mark(function t(){var e,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:return e=t.sent,t.next=5,window.localStorage.setItem("token",e.data.token);case 5:return t.next=7,O(x.routes,"GET");case 7:n=t.sent,this.setState({routes:n.data.data});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleRoute",value:function(){var t=Object(s.a)(l.a.mark(function t(e){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,a=x.routes,r=e.target.value,y.a.get(a+"/".concat(r),b);case 3:return n=t.sent,t.next=6,this.setState(Object(p.a)({},this.state,{is_platform:!0,directions:n.data.directions,platforms:n.data.directions[0].platforms,selected:Object(p.a)({},this.state.selected,{route:n.data,direction:n.data.directions[0],platform:n.data.directions[0].platforms[0]})}));case 6:case"end":return t.stop()}var a,r},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.selected,e=t.route,n=t.direction,a=t.platform,o=(t.is_platform,a&&0!==Object.keys(a.audio).length&&"http://transport.inobi.kg:5000/transport/audio/ru/".concat(a.audio.ru.current)),i=a&&0!==Object.keys(a.audio).length&&"http://transport.inobi.kg:5000/transport/audio/ru/".concat(a.audio.ru.next),c=a&&0!==Object.keys(a.audio).length&&"http://transport.inobi.kg:5000/transport/audio/ky/".concat(a.audio.ky.current),l=a&&0!==Object.keys(a.audio).length&&"http://transport.inobi.kg:5000/transport/audio/ky/".concat(a.audio.ky.next);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"}},r.a.createElement("select",{name:"route",id:"route",onChange:this.handleRoute.bind(this)},this.routeOpt()),r.a.createElement("select",{name:"direction",id:"direction",onChange:this.handleDirection},this.directionOpt()),r.a.createElement("select",{name:"platforms",id:"platforms",onChange:this.handlePlatform.bind(this)},this.platformOpt())),r.a.createElement("div",{style:{margin:"20px"}},r.a.createElement("p",null,"Route: ",e&&e.name),r.a.createElement("p",null,"Direction: ",n&&n.type),r.a.createElement("p",null,"Platform: ",a&&a.station.name),r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:this.state.is_all,label:"For ALL?",onChange:this.handleAll.bind(this)}))),r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"10px",display:"flex",flexDirection:"row",justifyContent:"space-around",width:900}},r.a.createElement("p",{style:{marginRight:50}},"RU: "),r.a.createElement("span",null,"Current:",r.a.createElement("input",{type:"file",accept:"audio/wav",name:"ru_current",onChange:this.handleUpload}),a&&r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:o,type:"audio/wav"}))),r.a.createElement("span",null,"Next:",r.a.createElement("input",{type:"file",accept:"audio/wav",name:"ru_next",onChange:this.handleUpload}),a&&r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:i,type:"audio/wav"})))),r.a.createElement("div",{style:{margin:"10px",display:"flex",flexDirection:"row",justifyContent:"space-around",width:900}},r.a.createElement("p",{style:{marginRight:50}},"KY: "),r.a.createElement("span",null,"Current: ",r.a.createElement("input",{type:"file",accept:"audio/wav",name:"ky_current",onChange:this.handleUpload}),a&&r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:c,type:"audio/wav"}))),r.a.createElement("span",null,"Next: ",r.a.createElement("input",{type:"file",accept:"audio/wav",name:"ky_next",onChange:this.handleUpload}),a&&r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:l,type:"audio/wav"})))),r.a.createElement("button",{onClick:this.handleSubmit},"Submit")))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.b10b1d62.chunk.js.map